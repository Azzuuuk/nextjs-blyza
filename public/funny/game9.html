<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5 Seconds Frenzy - Game Show Edition!</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bungee&family=Luckiest+Guy&family=Quicksand:wght@300..700&family=Orbitron:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Base Styles from Guess The Price */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --primary: #FF8833; /* Blyza Orange */
            --secondary: #CB7AE1; /* Blyza Purple */
            --light: #F2F2F2;
            --success: #00BFA6; /* Blyza Keppel */
            --danger: #ff4b2b;
            --dark: #1a1c20;
            --darker: #0f1012;
            --info: #4ECDC4;
            --gold: #FFD700; /* Game show gold */
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(135deg, var(--dark) 0%, var(--darker) 100%);
            color: var(--light);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .game-container {
            max-width: 900px;
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 30px;
            box-shadow:
                0 20px 40px rgba(0, 0, 0, 0.4),
                inset 0 1px 1px rgba(255, 255, 255, 0.1);
            text-align: center;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        /* Brand Logo Styles */
        .brand-logo {
            object-fit: contain;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }
        .brand-logo-prominent {
            display: block;
            margin: 0 auto 20px;
            max-height: 80px; /* GTP Height */
        }

        h1 { /* Main Game Title */
            font-family: "Luckiest Guy", cursive;
            font-size: 3rem; /* GTP Size */
            margin-bottom: 25px;
            color: var(--gold);
            text-shadow:
                0 2px 0px #000,
                0 4px 6px rgba(0, 0, 0, 0.5),
                0 0 30px var(--primary);
            letter-spacing: 1px;
            margin-top: 10px;
        }
        h2 { /* Screen titles like "Enter Team Names" */
            font-family: "Bungee", cursive;
            font-size: 1.8rem; /* GTP Size */
            margin-bottom: 20px;
            color: var(--primary); /* Use primary or gold */
            text-shadow: 0 1px 2px #000;
        }
         h3 { /* General subheadings, less prominent than h2 */
            font-family: "Bungee", cursive;
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: var(--secondary); /* Or var(--light) */
         }

        /* Screen Styles */
        .screen { display: none; animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .active-screen, .active { display: block; }

        /* Instructions Section - GTP Style */
        .instructions {
            font-family: "Quicksand", sans-serif;
            background: rgba(255, 255, 255, 0.05);
            padding: 30px;
            border-radius: 20px;
            margin: 30px 0;
            line-height: 1.8;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            text-align: left;
        }
        .instructions p { /* "How to play" title uses Bungee, content uses Quicksand */
            font-size: 1.1rem; margin-bottom: 15px; color: var(--light);
        }
        .instructions p strong:first-child { /* For "How to play:" */
             font-family: "Bungee", cursive; font-size: 1.2em; display:block; margin-bottom: 10px;
        }
        .instructions p strong { color: var(--primary); } /* For PASS/FAIL text */
        .instructions a { color: var(--secondary); text-decoration: none; font-weight: bold; display: inline-flex; align-items: center; gap: 5px; transition: color 0.3s ease; }
        .instructions a:hover { color: var(--primary); text-decoration: underline; }

        /* Team Setup - GTP Style */
        .team-inputs { /* Container for team name fields */
            margin: 30px 0; background: rgba(255,255,255,0.05); padding: 30px;
            border-radius: 20px; border: 1px solid rgba(255,255,255,0.1);
        }
        .team-input { margin-bottom: 20px; }
        .team-input label {
            display: block; margin-bottom: 10px; font-weight: 600;
            color: var(--light); font-size: 1.1rem; font-family: "Bungee", cursive;
        }
        .team-input input {
            width: 100%; max-width: 350px; /* Wider input */
            padding: 15px 20px; /* GTP input padding */
            border-radius: 12px; /* GTP input radius */
            border: 1px solid rgba(255,255,255,0.1); font-size: 1.1rem;
            background: rgba(255,255,255,0.05); color: var(--light);
            transition: all 0.3s ease; font-family: 'Quicksand', sans-serif;
        }
        .team-input input:focus {
            outline: none; border-color: var(--secondary);
            box-shadow: 0 0 10px rgba(203,122,225,0.2);
        }

        /* Game Screen Elements - GTP Style */
        .team-display { /* Container for team cards */
            display: flex; justify-content: space-around; gap: 20px;
            margin: 30px 0; flex-wrap: wrap;
        }
        .team-card { /* Individual team card */
            background: rgba(0,0,0,0.3); padding: 20px; border-radius: 15px;
            border: 2px solid var(--gold); transition: all 0.3s ease;
            min-width: 200px; text-align: center; flex: 1; max-width: 300px;
            box-shadow: 0 5px 10px rgba(0,0,0,0.3);
        }
        .team-card.active-turn { /* Highlight active team */
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(255,136,51,0.3), 0 0 10px var(--gold),
                        inset 0 0 10px rgba(255,136,51,0.1);
            transform: scale(1.05); background: rgba(255,136,51,0.1);
        }
        .team-name { /* Team name on card */
            font-family: "Bungee", cursive; font-weight: normal; font-size: 1.4rem;
            margin-bottom: 10px; color: var(--primary); text-shadow: 0 1px 1px #000;
        }
        .team-score { /* Score on card */
            font-family: "Orbitron", sans-serif; font-size: 2.5rem;
            color: var(--light); text-shadow: 0 0 8px var(--gold);
        }
        .question-display-area { /* Question text area */
            font-size: 1.8em; margin: 30px auto; min-height: 100px; max-width: 90%;
            display: flex; align-items: center; justify-content: center;
            background: rgba(0,0,0,0.3); padding: 25px; border-radius: 15px;
            line-height: 1.4; color: var(--light); font-weight: 600;
            border: 2px solid var(--gold); box-shadow: 0 0 15px var(--gold);
            font-family: "Quicksand", sans-serif; /* Question text font */
        }
         .question-hidden-text { /* "Press Start Timer..." */
            font-style: italic; color: rgba(242,242,242,0.6); font-size: 1.5rem;
            font-family: "Bungee", cursive;
         }
        .timer-display-area { /* Timer countdown */
            font-family: "Orbitron", sans-serif; /* Digital clock font */
            font-size: 5em; margin: 25px 0; color: var(--danger);
            text-shadow: 0 0 15px var(--danger), 0 0 25px var(--danger); /* Stronger glow */
        }
        .button-controls-area {
             margin-top: 25px; display: flex; flex-direction: column;
             align-items: center; gap: 15px;
        }
        .result-buttons-container {
            display: none; justify-content: center; gap: 20px;
            flex-wrap: wrap; width: 100%;
        }

        /* Buttons - GTP Style */
        button {
            background: linear-gradient(135deg, var(--primary) 0%, #ff7711 100%);
            color: var(--light); border: 2px solid var(--darker); padding: 15px 25px;
            font-size: 1rem; border-radius: 50px; cursor: pointer;
            font-weight: normal; /* Bungee is bold */ transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3), inset 0 -2px 5px rgba(0,0,0,0.2);
            margin: 10px 5px; font-family: "Bungee", cursive; text-shadow: 1px 1px 2px #000;
            display: inline-flex; align-items: center; justify-content: center; gap: 8px;
            min-width: 180px; flex-shrink: 0;
        }
        button:hover:not(:disabled) {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(0,0,0,0.4), inset 0 -2px 5px rgba(0,0,0,0.2), 0 0 10px var(--primary);
            background: linear-gradient(135deg, #ff7711 0%, var(--primary) 100%);
        }
        button:active:not(:disabled) { transform: translateY(-1px) scale(1.02); }
        button:disabled {
            background: rgba(255,255,255,0.1); cursor:not-allowed; opacity:0.6;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2); transform:none; border-color: rgba(0,0,0,0.5);
        }
        .btn-primary {}
        .btn-success { background: linear-gradient(135deg, var(--success) 0%, #00a890 100%); }
        .btn-success:hover:not(:disabled) { box-shadow: 0 8px 25px rgba(0,0,0,0.4), inset 0 -2px 5px rgba(0,0,0,0.2), 0 0 10px var(--success); }
        .btn-danger { background: linear-gradient(135deg, var(--danger) 0%, #ff416c 100%); }
        .btn-danger:hover:not(:disabled) { box-shadow: 0 8px 25px rgba(0,0,0,0.4), inset 0 -2px 5px rgba(0,0,0,0.2), 0 0 10px var(--danger); }
        .btn-secondary { background: linear-gradient(135deg, var(--secondary) 0%, #b85cd6 100%); }
        .btn-secondary:hover:not(:disabled) { box-shadow: 0 8px 25px rgba(0,0,0,0.4), inset 0 -2px 5px rgba(0,0,0,0.2), 0 0 10px var(--secondary); }
        .btn-info { background: linear-gradient(135deg, var(--info) 0%, #3eb7af 100%); }
        .btn-info:hover:not(:disabled) { box-shadow: 0 8px 25px rgba(0,0,0,0.4), inset 0 -2px 5px rgba(0,0,0,0.2), 0 0 10px var(--info); }


        /* Win Screen - GTP Style */
        .win-message-text {
            font-size: 3rem; margin: 30px 0; color: var(--gold);
            text-shadow: 0 3px 0px #000, 0 0 20px var(--primary);
            font-family: "Luckiest Guy", cursive;
        }
        .winner-trophy-icon {
            font-size: 6rem; margin: 20px 0 30px 0;
            animation: bounce 1.5s infinite ease-in-out; color: var(--gold);
            text-shadow: 0 0 20px var(--gold), 0 0 30px var(--primary);
        }
        @keyframes bounce { 0%,100%{transform:translateY(0) scale(1);} 50%{transform:translateY(-35px) scale(1.1);} }
        /* Game Over Buttons & Treat Yourself - GTP Style */
        .game-over-buttons-container { display: flex; justify-content: center; align-items: flex-start; flex-wrap: wrap; gap: 10px; margin-top: 20px; }
        .game-over-button-wrapper { position: relative; display: flex; flex-direction: column; align-items: center; }
        .treat-yourself-callout { margin-bottom: 8px; background-color: var(--gold); color: var(--darker); padding: 8px 15px; border-radius: 20px; font-family: "Bungee",cursive; font-size:0.9rem; white-space:nowrap; box-shadow:0 2px 10px rgba(255,215,0,0.5); display:none; align-items:center; gap:8px; z-index:10;}
        .treat-yourself-callout i { font-size: 1.2em; animation: bounceArrow 1s infinite; }
        @keyframes bounceArrow { 0%,100%{transform:translateY(0);} 50%{transform:translateY(-4px);} }


        /* Time Up Animation Pop-up - Styled like Feedback Pop-up */
        .time-up-popup {
            position: fixed; top: 50%; left: 50%;
            background-color: rgba(255,75,43, 0.97); /* Use danger color */
            color: white; padding: 30px 50px; border-radius: 20px; font-size: 2.8rem;
            font-family: "Luckiest Guy", cursive; text-align: center; z-index: 2000;
            box-shadow: 0 15px 40px rgba(0,0,0,0.7);
            opacity: 0; transform: translate(-50%,-50%) scale(0.7);
            /* Animation directly on class, similar to feedback popup */
            border: 3px solid var(--gold); /* Gold border for consistency */
            animation: timeUpPopAnim 1.5s forwards; /* Specific animation */
            display: none; /* Start hidden */
        }
        @keyframes timeUpPopAnim{
            0%{opacity:0;transform:translate(-50%,-50%) scale(.7)}
            20%{opacity:1;transform:translate(-50%,-50%) scale(1.1)}
            80%{opacity:1;transform:translate(-50%,-50%) scale(1.1)}
            100%{opacity:0;transform:translate(-50%,-50%) scale(.7)}
        }


        /* Icon Buttons (Home, Back, Settings) */
       .icon-btn {
            position: absolute;
            background: rgba(0,0,0, 0.3); color: var(--light);
            border: 1px solid var(--gold); border-radius: 50%;
            width: 40px; height: 40px; font-size: 1.1rem;
            cursor: pointer; transition: all 0.3s ease;
            display: flex; justify-content: center; align-items: center;
            z-index: 100; padding: 0; margin: 0;
            box-shadow: none; text-shadow: none;
            text-decoration: none; /* For <a> tags */
        }
        .icon-btn#settings-btn { top: 15px; right: 15px; display : flex; }
        .icon-btn#home-menu-btn { top: 15px; left: 15px; display: flex; }
        .icon-btn#back-btn { top: 15px; left: 15px; display: flex; }
        .icon-btn:hover {
            background: rgba(0,0,0, 0.5); transform: scale(1.1) rotate(15deg);
            box-shadow: 0 0 10px var(--gold);
        }
        .icon-btn#back-btn:hover { transform: scale(1.1) rotate(-5deg); }
        .icon-btn i { margin: 0; }

        /* Modal Styles - GTP Style */
         .modal {
            position: fixed; z-index: 1000; left: 0; top: 0;
            width: 100%; height: 100%; overflow: auto;
            background-color: rgba(0,0,0,0.7); backdrop-filter: blur(8px);
            display: none; justify-content: center; align-items: center;
        }
        .modal-content {
            background-color: var(--darker); margin: auto; padding: 30px;
            border: 2px solid var(--gold); border-radius: 15px;
            width: 80%; max-width: 450px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.6), 0 0 20px var(--primary);
            position: relative; color: var(--light);
        }
        .modal-content h2 {
            font-family: "Bungee", cursive; color: var(--primary);
            text-align: center; margin-bottom: 25px; font-size: 1.8rem;
        }
        .setting-item { margin-bottom: 20px; display: flex; flex-direction: column; }
        .setting-item label { margin-bottom: 8px; font-weight: 600; font-size: 0.9rem;}
        input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; }
        input[type=range]::-webkit-slider-thumb {
          -webkit-appearance: none; height: 20px; width: 20px; border-radius: 50%;
          background: var(--primary); cursor: pointer; margin-top: -7px;
          box-shadow: 0 0 8px var(--primary);
        }
        input[type=range]::-moz-range-thumb {
          height: 20px; width: 20px; border-radius: 50%; background: var(--primary);
          cursor: pointer; border: none; box-shadow: 0 0 8px var(--primary);
        }
        input[type=range]::-webkit-slider-runnable-track {
          width: 100%; height: 6px; cursor: pointer; background: rgba(255,255,255,0.2);
          border-radius: 3px; border: 1px solid rgba(0,0,0,0.2);
        }
        input[type=range]::-moz-range-track {
          width: 100%; height: 6px; cursor: pointer; background: rgba(255,255,255,0.2);
          border-radius: 3px; border: 1px solid rgba(0,0,0,0.2);
        }
        .close-modal-btn {
            color: #aaa; position: absolute; top: 15px; right: 20px;
            font-size: 28px; font-weight: bold; cursor: pointer;
        }
        .close-modal-btn:hover, .close-modal-btn:focus { color: var(--light); text-decoration: none; }
        
        /* Confetti Styles */
        .confetti-piece { position:fixed; width:10px; height:20px; background-color:var(--primary); opacity:0; animation-timing-function:linear; animation-fill-mode:forwards; pointer-events:none; z-index:3000; }
        @keyframes fallAndFade { 0%{transform:translateY(-20vh) rotate(0deg); opacity:1;} 100%{transform:translateY(120vh) rotate(720deg); opacity:0;} }

        /* Responsive */
        @media (max-width: 768px) {
            .game-container { padding: 20px; }
            h1 { font-size: 2.5rem; }
            h2 { font-size: 1.6rem; }
            .team-display { flex-direction: column; align-items: center; gap: 15px; }
            .team-card { min-width: 80%; max-width: 90%; }
            .question-display-area { font-size: 1.5em; padding: 20px; max-width: 95%;}
            .timer-display-area { font-size: 4em; }
            .button-controls-area { gap: 10px; }
            button { padding: 12px 22px; font-size: 0.9rem; min-width: 160px; }
            .win-message-text { font-size: 2.2rem; }
            .winner-trophy-icon { font-size: 5rem; }
            .modal-content { padding: 20px; }
            .game-over-buttons-container { flex-direction: column; align-items: center;}
            .game-over-buttons-container .game-over-button-wrapper { width: 90%; margin: 5px auto;}
            .game-over-buttons-container .game-over-button-wrapper button { width: 100%;}
            .time-up-popup { font-size: 2.2rem; padding: 25px 40px; width: 80%;}
            .icon-btn { top: 10px; right: 10px; width: 38px; height: 38px; font-size: 1rem; }
            .icon-btn#home-menu-btn, .icon-btn#back-btn { top: 10px; left: 10px; }
        }
         @media (max-width: 480px) {
              h1 { font-size: 2rem; }
              h2 { font-size: 1.4rem; }
              .game-container { padding: 15px; }
              .team-input input { max-width: 90%; padding: 12px 18px; font-size: 1rem;}
              .question-display-area { font-size: 1.3em; }
              .timer-display-area { font-size: 3.5em; }
              button { width: 85%; margin: 8px auto; padding: 12px 18px;}
              .result-buttons-container button { width: 45%; }
              .time-up-popup { font-size: 1.8rem; padding: 20px 30px;}
         }
    </style>
</head>
<body>
    <div class="game-container">
        <a href="/" id="home-menu-btn" class="icon-btn" aria-label="Back to Games List">
            <i class="fas fa-home"></i>
        </a>
        <button id="back-btn" class="icon-btn" aria-label="Go Back" style="display: none;">
            <i class="fas fa-arrow-left"></i>
        </button>
        <button id="settings-btn" class="icon-btn" aria-label="Open Settings">
            <i class="fas fa-cog"></i>
        </button>

        <!-- Start Screen -->
        <div id="start-screen" class="screen active-screen">
            <img class="brand-logo brand-logo-prominent" src="https://static.wixstatic.com/shapes/9ce3e5_4f0149a89dd841859da02f59247b5b6b.svg" alt="Blyza Mascot">
            <h1>5 Seconds Frenzy</h1>
            <div class="instructions">
                <p><strong>HOW TO PLAY:</strong></p>
                <p>Teams take turns. One player gets a "Name 3..." question. Press 'Start Timer' to reveal the question and begin the 5-second countdown!</p>
                <p>If they name 3 correct items before time runs out, click <strong>PASS (+1)</strong> for their team. If they fail, click <strong>FAIL (+1 Other Team)</strong>. First team to 5 points wins!</p>
            </div>
            <button id="setup-teams-btn" class="btn-primary">Start Setup <i class="fas fa-users"></i></button>
        </div>

        <!-- Team Setup Screen -->
        <div id="team-setup-screen" class="screen">
            <h2>Enter Team Names</h2>
            <div class="team-inputs">
                <div class="team-input">
                    <label for="team1-name-input">Team 1 Name:</label>
                    <input type="text" id="team1-name-input" placeholder="Team 1">
                </div>
                <div class="team-input">
                    <label for="team2-name-input">Team 2 Name:</label>
                    <input type="text" id="team2-name-input" placeholder="Team 2">
                </div>
            </div>
            <button id="begin-game-btn" class="btn-primary">Begin Game <i class="fas fa-play"></i></button>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <div class="team-display">
                <div class="team-card" id="team1-card-display">
                    <div class="team-name" id="team1-name-text">Team 1</div>
                    <div class="team-score" id="team1-score-text">0</div>
                </div>
                <div class="team-card" id="team2-card-display">
                    <div class="team-name" id="team2-name-text">Team 2</div>
                    <div class="team-score" id="team2-score-text">0</div>
                </div>
            </div>
            <div class="question-display-area" id="question-display-text">Press Start Timer...</div>
            <div class="timer-display-area" id="timer-display-text">5</div>
            <div class="button-controls-area">
                 <button id="start-timer-reveal-btn" class="btn-secondary">
                     <i class="fas fa-play-circle"></i> Start Timer & Reveal
                 </button>
                 <div class="result-buttons-container" id="result-buttons-div">
                    <button class="btn-success" id="pass-result-btn">
                        <i class="fas fa-check"></i> Pass (+1)
                    </button>
                    <button class="btn-danger" id="fail-result-btn">
                        <i class="fas fa-times"></i> Fail (+1 Other)
                    </button>
                 </div>
            </div>
        </div>

        <!-- Win Screen -->
        <div id="win-screen" class="screen">
            <img class="brand-logo brand-logo-prominent" src="https://static.wixstatic.com/shapes/9ce3e5_4f0149a89dd841859da02f59247b5b6b.svg" alt="Blyza Mascot">
            <h1>Game Over!</h1>
            <div class="win-message-text" id="win-message-content">Team Wins!</div>
            <div class="winner-trophy-icon">🏆</div>
            <div class="game-over-buttons-container">
                <div class="game-over-button-wrapper">
                     <button id="play-again-game-btn" class="btn-success"><i class="fas fa-redo"></i> Play Again</button>
                </div>
                <div class="game-over-button-wrapper">
                     <button id="main-menu-nav-btn" class="btn-secondary"><i class="fas fa-home"></i> Main Menu</button>
                </div>
                <div class="game-over-button-wrapper" id="store-button-wrapper">
                     <button id="visit-store-btn" class="btn-info"><i class="fas fa-store"></i> Visit Store</button>
                </div>
            </div>
        </div>
    </div>

     <!-- Settings Modal -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <span id="close-modal-btn" class="close-modal-btn">×</span>
            <h2>Settings</h2>
            <div class="setting-item">
                <label for="bgm-volume-slider">Background Music Volume:</label>
                <input type="range" id="bgm-volume-slider" min="0" max="1" step="0.01" value="0.2">
            </div>
            <div class="setting-item">
                <label for="sfx-toggle-btn">Sound Effects:</label>
                <button id="sfx-toggle-btn" class="btn-secondary">SFX: ON</button>
            </div>
        </div>
    </div>

    <!-- Time Up Pop-up -->
    <div id="time-up-popup-element" class="time-up-popup" style="display:none;">TIME UP!</div>

    <audio id="background-game-music" loop src="https://static.wixstatic.com/mp3/9ce3e5_380adfaea802407b9a4cebc67f12a216.mp3"></audio>
    <audio id="start-game-sound" src="https://static.wixstatic.com/mp3/9ce3e5_1b9151238aec4e29ab14f1526e9c1334.mp3"></audio>
    <audio id="interaction-sound" src="https://static.wixstatic.com/mp3/9ce3e5_fc326aa1760c485dbac083ec55c2bfcb.wav"></audio>
    <audio id="timer-start-sound" src="https://static.wixstatic.com/mp3/9ce3e5_fc326aa1760c485dbac083ec55c2bfcb.wav"></audio>
    <audio id="timer-tick-sound" loop src=""></audio>
    <audio id="timer-up-sound" src="https://static.wixstatic.com/mp3/9ce3e5_16ac679126354f7db8a0f93c9f4fa7a1.wav"></audio>
    <audio id="pass-sound" src="https://static.wixstatic.com/mp3/9ce3e5_76691a6fefcd4536aa403ada111e886a.mp3"></audio>
    <audio id="fail-sound" src="https://static.wixstatic.com/mp3/9ce3e5_277f814439064d1bbe5c0342241b23e4.mp3"></audio>
    <audio id="confetti-sound" src="https://static.wixstatic.com/mp3/9ce3e5_5d7fcfc389734cf7994f5d37de621e3d.mp3"></audio>

    <script>
        const gameConfig = { sfxEnabled: true, musicVolume: 0.2, winningScore: 5, timerDuration: 5 };
        const gameState = { team1: { name: "Team 1", score: 0 }, team2: { name: "Team 2", score: 0 }, currentQuestion: "", questionTextToReveal: "", currentTeam: 1, timerInterval: null, timeLeft: gameConfig.timerDuration, usedQuestions: [] };
        const categories = [ "friends that are not funny", "people you wouldn't trust", "objects you can swallow", "things you can't do in a church", "things men have that women don't", "people you can knock out", "types of diseases", "people you find unattractive", "people you find attractive", "presidents", "capital cities", "countries in Europe", "countries in Asia", "of your favourite websites", "types of milk", "different crimes", "items in your bathroom", "ethnicities", "halloween cosplays", "things that you rub", "things smaller than your nose", "F1 teams", "currencies", "different Apple products", "sports without a ball", "Airlines", "different phobias", "mario characters", "female celebrities", "male celebrities", "designer brands", "types of trees", "animated characters", "football teams", "brands of water", "brands of chocolates", "types of cheese", "things you can't live without", "south american countries", "different seas", "periodic elements", "characters from the show Friends", "animals you could beat up", "flavours of milkshake", "types of pasta", "members of one direction", "mobile games", "different planets", "states in the USA", "things that are yellow", "female musicians", "male musicians", "types of milk", "types of seasoning", "band instruments", "things that are purple", "things that are soft", "types of fish", "types of haircuts", "types of coffee drinks", "monuments", "pre downloaded phone apps", "types of jewellery", "different languages", "things you wear under your clothes", "things in a cinema", "things you do before sleeping", "animals sounds", "things that green", "things you wouldn't want to find in your house" ];
        
        const screens = { start: document.getElementById("start-screen"), teamSetup: document.getElementById("team-setup-screen"), game: document.getElementById("game-screen"), win: document.getElementById("win-screen") };
        const homeMenuBtnEl = document.getElementById('home-menu-btn');
        const backBtnEl = document.getElementById('back-btn');
        const settingsBtnEl = document.getElementById('settings-btn');
        const setupTeamsBtnEl = document.getElementById("setup-teams-btn");
        const team1NameInputEl = document.getElementById("team1-name-input");
        const team2NameInputEl = document.getElementById("team2-name-input");
        const beginGameBtnEl = document.getElementById("begin-game-btn");
        const playAgainGameBtnEl = document.getElementById("play-again-game-btn");
        const passResultBtnEl = document.getElementById("pass-result-btn");
        const failResultBtnEl = document.getElementById("fail-result-btn");
        const startTimerRevealBtnEl = document.getElementById("start-timer-reveal-btn");
        const questionDisplayTextEl = document.getElementById("question-display-text");
        const timerDisplayTextEl = document.getElementById("timer-display-text");
        const resultButtonsDivEl = document.getElementById("result-buttons-div");
        const mainMenuNavBtnEl = document.getElementById("main-menu-nav-btn");
        const storeButtonWrapperEl = document.getElementById("store-button-wrapper");
        let treatYourselfElement = null;
        const visitStoreBtnEl = document.getElementById("visit-store-btn");
        const team1NameTextEl = document.getElementById("team1-name-text");
        const team2NameTextEl = document.getElementById("team2-name-text");
        const team1ScoreTextEl = document.getElementById("team1-score-text");
        const team2ScoreTextEl = document.getElementById("team2-score-text");
        const team1CardDisplayEl = document.getElementById("team1-card-display");
        const team2CardDisplayEl = document.getElementById("team2-card-display");
        const winMessageContentEl = document.getElementById("win-message-content");
        const timeUpPopupElement = document.getElementById("time-up-popup-element");
        const settingsModalEl = document.getElementById('settings-modal');
        const closeModalBtnEl = document.getElementById('close-modal-btn');
        const bgmVolumeSliderEl = document.getElementById('bgm-volume-slider');
        const sfxToggleBtnEl = document.getElementById('sfx-toggle-btn');
        const backgroundMusicAudioEl = document.getElementById('background-game-music');
        const startGameSoundAudioEl = document.getElementById('start-game-sound');
        const interactionSoundAudioEl = document.getElementById('interaction-sound');
        const timerStartSoundAudioEl = document.getElementById('timer-start-sound');
        const timerTickSoundAudioEl = document.getElementById('timer-tick-sound');
        const timerUpSoundAudioEl = document.getElementById('timer-up-sound');
        const passSoundAudioEl = document.getElementById('pass-sound');
        const failSoundAudioEl = document.getElementById('fail-sound');
        const confettiSoundAudioEl = document.getElementById('confetti-sound');

        function playSound(audioElement) { if (gameConfig.sfxEnabled && audioElement) { audioElement.currentTime = 0; audioElement.volume = 0.7; audioElement.play().catch(e => console.error("SFX error:", e));}}
        function playSoundWithCallback(audioElement, callback, ...args) { if (gameConfig.sfxEnabled && audioElement) { audioElement.currentTime = 0; audioElement.volume = 0.7; let cbEx = false; const exCb = () => { if (!cbEx) { cbEx = true; audioElement.removeEventListener('ended', exCb); if(typeof soundTimeoutId!=='undefined' && soundTimeoutId) clearTimeout(soundTimeoutId); if(callback) callback(...args); }}; audioElement.addEventListener('ended', exCb); const sDur = (audioElement.duration&&isFinite(audioElement.duration))?audioElement.duration*1000:500; const soundTimeoutId=setTimeout(exCb,sDur+200); audioElement.play().catch(e=>{console.error("SFX error:",e);exCb();});} else {if(callback)callback(...args);}}
        function initBackgroundMusic() { backgroundMusicAudioEl.volume = gameConfig.musicVolume; backgroundMusicAudioEl.play().catch(e => console.log("BGM autoplay failed.", e)); }

        function switchScreen(screenId) {
            Object.values(screens).forEach(screen => screen.classList.remove('active-screen', 'active'));
            screens[screenId].classList.add('active-screen', 'active');
            
            const isStartScreen = screenId === 'start';
            homeMenuBtnEl.style.display = isStartScreen ? 'flex' : 'none';
            backBtnEl.style.display = isStartScreen ? 'none' : 'flex';
            if (screenId === 'win') {
                backBtnEl.style.display = 'none';
            }
            if (treatYourselfElement) {
                treatYourselfElement.style.display = (screenId === 'win') ? 'flex' : 'none';
            }
        }

        function goToMainMenu() {
            if (treatYourselfElement) treatYourselfElement.style.display = 'none';
            if (backgroundMusicAudioEl.paused) initBackgroundMusic();
            switchScreen('start');
        }

        setupTeamsBtnEl.addEventListener("click", () => { playSound(interactionSoundAudioEl); switchScreen('teamSetup'); });
        backBtnEl.addEventListener("click", () => { playSound(interactionSoundAudioEl); goToMainMenu(); });
        beginGameBtnEl.addEventListener("click", () => { if(backgroundMusicAudioEl.paused) initBackgroundMusic(); playSoundWithCallback(startGameSoundAudioEl, startGame); });
        startTimerRevealBtnEl.addEventListener("click", handleStartTimer);
        passResultBtnEl.addEventListener("click", () => { playSound(passSoundAudioEl); handleResult(true); });
        failResultBtnEl.addEventListener("click", () => { playSound(failSoundAudioEl); handleResult(false); });
        playAgainGameBtnEl.addEventListener("click", () => { playSoundWithCallback(startGameSoundAudioEl, resetGame); });
        mainMenuNavBtnEl.addEventListener("click", () => { playSound(interactionSoundAudioEl); goToMainMenu(); });
        visitStoreBtnEl.addEventListener("click", () => { playSound(interactionSoundAudioEl); window.location.href = '/store'; });

        settingsBtnEl.addEventListener('click', () => { playSound(interactionSoundAudioEl); settingsModalEl.style.display = 'flex'; });
        closeModalBtnEl.addEventListener('click', () => { playSound(interactionSoundAudioEl); settingsModalEl.style.display = 'none'; });
        window.addEventListener('click', (event) => { if (event.target === settingsModalEl) { playSound(interactionSoundAudioEl); settingsModalEl.style.display = 'none'; } });
        bgmVolumeSliderEl.addEventListener('input', (e) => { gameConfig.musicVolume = parseFloat(e.target.value); backgroundMusicAudioEl.volume = gameConfig.musicVolume; });
        sfxToggleBtnEl.addEventListener('click', () => { playSound(interactionSoundAudioEl); gameConfig.sfxEnabled = !gameConfig.sfxEnabled; sfxToggleBtnEl.textContent = `SFX: ${gameConfig.sfxEnabled ? 'ON' : 'OFF'}`; sfxToggleBtnEl.classList.toggle('btn-success', gameConfig.sfxEnabled); sfxToggleBtnEl.classList.toggle('btn-danger', !gameConfig.sfxEnabled); });

        function startGame() {
            gameState.team1.name = team1NameInputEl.value.trim() || "Team 1";
            gameState.team2.name = team2NameInputEl.value.trim() || "Team 2";
            if (gameState.team1.name.length > 15 || gameState.team2.name.length > 15) { alert("Team names too long (max 15 chars)!"); return; }
            if (gameState.team1.name === gameState.team2.name) { alert("Team names must be different!"); return; }
            resetGame();
        }

        function resetGame() {
            gameState.team1.score = 0; gameState.team2.score = 0;
            gameState.currentTeam = 1; gameState.timeLeft = gameConfig.timerDuration;
            gameState.usedQuestions = []; // Reset used questions for a new game
            updateTeamDisplays();
            prepareTurn();
            if (treatYourselfElement) treatYourselfElement.style.display = 'none';
            switchScreen('game');
        }

        function updateTeamDisplays() {
            team1NameTextEl.textContent = gameState.team1.name;
            team2NameTextEl.textContent = gameState.team2.name;
            team1ScoreTextEl.textContent = gameState.team1.score;
            team2ScoreTextEl.textContent = gameState.team2.score;
            team1CardDisplayEl.classList.toggle("active-turn", gameState.currentTeam === 1);
            team2CardDisplayEl.classList.toggle("active-turn", gameState.currentTeam === 2);
        }

        function prepareTurn() {
            let availableCategories = categories.filter(cat => !gameState.usedQuestions.includes(cat));
            if (availableCategories.length === 0) { // All questions used, reset the pool
                gameState.usedQuestions = [];
                availableCategories = [...categories];
            }
            const randomCategory = availableCategories[Math.floor(Math.random() * availableCategories.length)];
            gameState.usedQuestions.push(randomCategory); // Mark as used for this session
            
            gameState.questionTextToReveal = `Name 3 ${randomCategory}...`;
            questionDisplayTextEl.innerHTML = `<span class="question-hidden-text">Press Start Timer...</span>`;
            gameState.timeLeft = gameConfig.timerDuration;
            timerDisplayTextEl.textContent = gameState.timeLeft;
            timerDisplayTextEl.style.color = 'var(--light)';
            startTimerRevealBtnEl.style.display = "inline-flex";
            startTimerRevealBtnEl.disabled = false;
            resultButtonsDivEl.style.display = "none";
            clearInterval(gameState.timerInterval);
            gameState.timerInterval = null;
        }

        function handleStartTimer() {
            if (gameState.timerInterval) return;
            playSound(timerStartSoundAudioEl);
            startTimerRevealBtnEl.style.display = "none";
            questionDisplayTextEl.textContent = gameState.questionTextToReveal;
            gameState.timeLeft = gameConfig.timerDuration;
            timerDisplayTextEl.textContent = gameState.timeLeft;
            timerDisplayTextEl.style.color = 'var(--danger)';
            gameState.timerInterval = setInterval(updateTimer, 1000);
        }

        function updateTimer() {
            gameState.timeLeft--;
            timerDisplayTextEl.textContent = gameState.timeLeft;
            if (gameState.timeLeft <= 0) {
                clearInterval(gameState.timerInterval);
                gameState.timerInterval = null;
                timerDisplayTextEl.textContent = 0;
                playSound(timerUpSoundAudioEl);
                showTimeUpAnimation();
                resultButtonsDivEl.style.display = "flex";
                startTimerRevealBtnEl.disabled = true;
            }
        }

        function showTimeUpAnimation() {
            timeUpPopupElement.style.display = "block";
            timeUpPopupElement.style.animation = 'none';
            timeUpPopupElement.offsetHeight; /* trigger reflow */
            timeUpPopupElement.style.animation = null; 
            timeUpPopupElement.style.animation = 'timeUpPopAnim 1.5s forwards';
        }

        function handleResult(passed) {
             clearInterval(gameState.timerInterval);
             gameState.timerInterval = null;
             resultButtonsDivEl.style.display = "none";
            if (passed) {
                if (gameState.currentTeam === 1) gameState.team1.score++; else gameState.team2.score++;
            } else {
                if (gameState.currentTeam === 1) gameState.team2.score++; else gameState.team1.score++;
            }
            updateTeamDisplays();
            if (gameState.team1.score >= gameConfig.winningScore || gameState.team2.score >= gameConfig.winningScore) {
                showWinScreen();
            } else {
                gameState.currentTeam = gameState.currentTeam === 1 ? 2 : 1;
                prepareTurn();
                updateTeamDisplays();
            }
        }

        function showWinScreen() {
            const winner = gameState.team1.score >= gameConfig.winningScore ? gameState.team1.name : gameState.team2.name;
            winMessageContentEl.textContent = `${winner} Wins!`;
             if (!treatYourselfElement) {
                treatYourselfElement = document.createElement('div');
                treatYourselfElement.className = 'treat-yourself-callout';
                treatYourselfElement.innerHTML = `<span>Treat Yourself!</span> <i class="fas fa-arrow-down"></i>`;
                storeButtonWrapperEl.insertBefore(treatYourselfElement, visitStoreBtnEl);
            }
            switchScreen('win');
            triggerConfetti();
            playSound(confettiSoundAudioEl);
        }

        document.addEventListener('DOMContentLoaded', () => {
            sfxToggleBtnEl.textContent = `SFX: ${gameConfig.sfxEnabled ? 'ON' : 'OFF'}`;
            sfxToggleBtnEl.classList.toggle('btn-success',gameConfig.sfxEnabled);
            sfxToggleBtnEl.classList.toggle('btn-danger',!gameConfig.sfxEnabled);
            bgmVolumeSliderEl.value = gameConfig.musicVolume;
            switchScreen('start');
        });
    </script>
    <script>
      window.va = window.va || function () { (window.va.q = window.va.q || []).push(arguments); };
    </script>
    <script src="/_vercel/insights/script.js" defer></script>
</body>
</html>